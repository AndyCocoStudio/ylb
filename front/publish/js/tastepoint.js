!function(){var a={},n={init:function(){n.getCount()},getCount:function(){$.when($.ajax({url:$.apiUrl+"/mine/places",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.count=e.data,n.getInfo()})})},getInfo:function(){$.when($.ajax({url:$.apiUrl+"/user/abstract",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){switch(a.user=e.data,e.data.role){case"Merchants":n.merchants();break;case"CustomerManager":n.customerManager();break;case"AreaManager":n.areaManager();break;case"CM":n.cm();break;case"AM":n.am();break;default:alert("您是普通会员，没有赠送体验积分权限"),window.location.href="customer.html"}})})},merchants:function(){$.when($.ajax({url:$.apiUrl+"/merchant/users",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.users,n.buildVue()})})},customerManager:function(){$.when($.ajax({url:$.apiUrl+"/customermanager/merchants",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.merchants,n.buildVue()})})},areaManager:function(){$.when($.ajax({url:$.apiUrl+"/area/customermanager",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.customers,n.buildVue()})})},am:function(){$.when($.ajax({url:$.apiUrl+"/area/customermanager",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.customers,n.buildVue()})})},cm:function(){$.when($.ajax({url:$.apiUrl+"/area/customermanager",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.customers,n.buildVue()})})},buildVue:function(){a=new Vue({el:"#taste-main",data:a,methods:{}})}};n.init()}();