!function(){var c={ccp:1,ct:0,cmcp:1,cmt:0,sz:20},t={init:function(){t.getUserInfo()},getUserInfo:function(){$.when($.ajax({url:$.apiUrl+"/user/abstract",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){c.user=e.data,"AreaManager"==e.data.role||"AM"==e.data.role?t.getAMerchant():t.getCMerchant()})})},getAMerchant:function(){$.when($.ajax({url:$.apiUrl+"/area/merchants?cp="+c.cmcp+"&sz="+c.sz,type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){c.ml=e.data.merchants,c.cmt=e.data.totalCount,t.getCustomer()})})},getCMerchant:function(){$.when($.ajax({url:$.apiUrl+"/customermanager/merchants?cp="+c.cmcp+"&sz="+c.sz,type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){c.ml=e.data.merchants,c.cmt=e.data.totalCount,t.buildVue()})})},getCustomer:function(){$.when($.ajax({url:$.apiUrl+"/area/customermanager?cp="+c.ccp+"&sz="+c.sz,type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){c.cm=e.data.customerManagers,c.ct=e.data.totalCount,t.buildVue()})})},buildVue:function(){c=new Vue({el:"#record-main",data:c,methods:{prev:function(){c.ccp<=1||(c.ccp=+c.ccp-1,t.getCustomer())},next:function(){c.ccp>=Math.ceil(c.ct/c.sz)||(c.ccp=+c.ccp+1,t.getCustomer())},jump:function(){c.ccp>=Math.ceil(c.ct/c.sz)&&(c.ccp=Math.ceil(c.ct/c.sz)),c.ccp<=1&&(c.ccp=1),t.getCustomer()},cmprev:function(){c.cmcp<=1||(c.cmcp=+c.cmcp-1,"AreaManager"==c.user.role||"AM"==c.user.role?t.getAMerchant():t.getCMerchant())},cmnext:function(){c.cmcp>=Math.ceil(c.cmt/c.sz)||(c.cmcp=+c.cmcp+1,"AreaManager"==c.user.role||"AM"==c.user.role?t.getAMerchant():t.getCMerchant())},cmjump:function(){c.cmcp>=Math.ceil(c.cmt/c.sz)&&(c.cmcp=Math.ceil(c.cmt/c.sz)),c.cmcp<=1&&(c.cmcp=1),"AreaManager"==c.user.role||"AM"==c.user.role?t.getAMerchant():t.getCMerchant()}}})}};t.init()}();