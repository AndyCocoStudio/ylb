!function(){var n={mobile:"",password:"",ref:$.urlParam("rid"),url:$.regexUrl()||"",num:60,counting:!1,countdown:0,txtinfo:!1},e={init:function(){e.buildVue()},buildVue:function(){n=new Vue({el:"#logon-main",data:n,methods:{showinfo:function(){if(n.mobile)if(n.mobile.length<11)$.ylbAlert("手机号码位数不正确");else if($.checkIsMobileNumber(n.mobile)){if(!n.password)return void $.ylbAlert("请输入密码");n.txtinfo=!0}else $.ylbAlert("请输入正确手机号");else $.ylbAlert("请输入手机号码")},logon:function(){n.txtinfo=!1,$.ajax({url:$.apiUrl+"/user/register",type:"PUT",data:JSON.stringify({mobile:n.mobile,password:n.password,referrerMobile:n.ref})}).done(function(n){$.ylbAjaxHandler(n,function(){$.setID(n.data.sessionID),$.localStorageHandler("set","flag",n.data.flag),window.location.href="index.html"})})},hideall:function(){this.txtinfo=!1},tologon:function(e){13==e.keyCode&&n.logon()},getCode:function(){n.counting||(n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?(n.counting=!0,$.ajax({url:$.apiUrl+"/captcha",type:"PUT",data:JSON.stringify({mobile:n.mobile})}).done(function(o){$.ylbAjaxHandler(o,function(){$.ylbAlert("发送成功"),n.countdown=setInterval(e.countDown,1e3)})})):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码"))}}})},countDown:function(){n.num>1?(n.num-=1,$(".btn-code").val(n.num+"秒后重新获取")):(n.counting=!1,$(".btn-code").val("重新获取"),n.num=60,clearInterval(n.countdown))}};e.init()}();