!function(){var n={mobile:"",password:"",url:$.regexUrl()||"",sid:$.getID()||"",num:60,counting:!1,countdown:0},o={init:function(){o.pageJump()},pageJump:function(){n.sid&&(n.url?window.location.href=n.url:window.location.href="index.html"),o.buildVue()},buildVue:function(){n=new Vue({el:"#login-main",data:n,methods:{login:function(){$.ajax({url:$.apiUrl+"/user/login",type:"POST",data:JSON.stringify({mobile:n.mobile,captcha:n.password})}).done(function(o){$.ylbAjaxHandler(o,function(){$.setID(o.data.sessionID),$.localStorageHandler("set","flag",o.data.flag),n.url?window.location.href=n.url:window.location.href="customer.html"})})},getCode:function(){n.counting||(n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?(n.counting=!0,$.ajax({url:$.apiUrl+"/captcha",type:"PUT",data:JSON.stringify({mobile:n.mobile})}).done(function(t){$.ylbAjaxHandler(t,function(){$.ylbAlert("发送成功"),n.countdown=setInterval(o.countDown,1e3)})})):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码"))}}})},countDown:function(){n.num>1?(n.num-=1,$(".btn-code").val(n.num+"秒后重新获取")):(n.counting=!1,$(".btn-code").val("重新获取"),n.num=60,clearInterval(n.countdown))}};o.init()}();