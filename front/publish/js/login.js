!function(){var n={mobile:"",password:"",url:$.regexUrl()||"",sid:$.getID()||"",num:60,counting:!1,countdown:0,npwd:!1,cover:!1,newpwd:{mobile:"",captcha:"",password:""}},e={init:function(){e.pageJump()},pageJump:function(){n.sid&&(n.url?window.location.href=n.url:window.location.href="index.html"),e.buildVue()},buildVue:function(){n=new Vue({el:"#login-main",data:n,methods:{login:function(){n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?$.ajax({url:$.apiUrl+"/user/login",type:"POST",data:JSON.stringify({mobile:n.mobile,captcha:n.password})}).done(function(e){$.ylbAjaxHandler(e,function(){$.setID(e.data.sessionID),$.localStorageHandler("set","flag",e.data.flag),n.url?window.location.href=n.url:window.location.href="customer.html"})}):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码")},tologin:function(e){13==e.keyCode&&n.login()},getCode:function(){n.counting||(n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?(n.counting=!0,$.ajax({url:$.apiUrl+"/captcha",type:"PUT",data:JSON.stringify({mobile:n.mobile})}).done(function(o){$.ylbAjaxHandler(o,function(){$.ylbAlert("发送成功"),n.countdown=setInterval(e.countDown,1e3)})})):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码"))},getCode2:function(){n.counting||(n.newpwd.mobile?n.newpwd.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.newpwd.mobile)?(n.counting=!0,$.ajax({url:$.apiUrl+"/captcha",type:"PUT",data:JSON.stringify({mobile:n.newpwd.mobile})}).done(function(o){$.ylbAjaxHandler(o,function(){$.ylbAlert("发送成功"),n.countdown=setInterval(e.countDown,1e3)})})):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码"))},setpwd:function(){return""==n.newpwd.mobile?void $.ylbAlert("请输入手机号码"):""==n.newpwd.captcha?void $.ylbAlert("请输入验证码"):""==n.newpwd.password?void $.ylbAlert("请输入密码"):void $.ajax({url:$.apiUrl+"/user/login/password/reset",type:"POST",data:JSON.stringify(n.newpwd)}).done(function(e){$.ylbAjaxHandler(e,function(){$.ylbAlert("设置成功，请重新登录"),n.hideall(),n.newpwd={mobile:"",captcha:"",password:""}})})},hideall:function(){this.npwd=!1,this.cover=!1},showforget:function(){this.cover=!0,this.npwd=!0}}})},countDown:function(){n.num>1?(n.num-=1,$(".btn-code, .a-code").val(n.num+"秒后重新获取")):(n.counting=!1,$(".btn-code").val("重新获取"),n.num=60,clearInterval(n.countdown))}};e.init()}();