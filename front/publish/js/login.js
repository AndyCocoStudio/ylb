!function(){var n={mobile:"",password:"",url:$.regexUrl()||"",sid:$.getID()||"",num:60,counting:!1,countdown:0},l={init:function(){l.pageJump()},pageJump:function(){n.sid&&(n.url?window.location.href=n.url:window.location.href="index.html"),l.buildVue()},buildVue:function(){n=new Vue({el:"#login-main",data:n,methods:{login:function(){n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?$.ajax({url:$.apiUrl+"/user/login",type:"POST",data:JSON.stringify({mobile:n.mobile,captcha:n.password})}).done(function(l){$.ylbAjaxHandler(l,function(){$.setID(l.data.sessionID),$.localStorageHandler("set","flag",l.data.flag),n.url?window.location.href=n.url:window.location.href="customer.html"})}):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码")},getCode:function(){n.counting||(n.mobile?n.mobile.length<11?$.ylbAlert("手机号码位数不正确"):$.checkIsMobileNumber(n.mobile)?(n.counting=!0,$.ajax({url:$.apiUrl+"/captcha",type:"PUT",data:JSON.stringify({mobile:n.mobile})}).done(function(o){$.ylbAjaxHandler(o,function(){$.ylbAlert("发送成功"),n.countdown=setInterval(l.countDown,1e3)})})):$.ylbAlert("请输入正确手机号"):$.ylbAlert("请输入手机号码"))}}})},countDown:function(){n.num>1?(n.num-=1,$(".btn-code").val(n.num+"秒后重新获取")):(n.counting=!1,$(".btn-code").val("重新获取"),n.num=60,clearInterval(n.countdown))}};l.init()}();