!function(){var n={id:$.urlParam("aid"),r:$.urlParam("r"),reason:!1,reasons:""},a={init:function(){a.getInfo()},getInfo:function(){$.when($.ajax({url:$.apiUrl+"/apply?id="+n.id+"&r="+n.r,type:"GET"})).done(function(i){$.ylbAjaxHandler(i,function(){n.detail=i.data,a.buildVue()})})},buildVue:function(){n=new Vue({el:"#apply-main",data:n,methods:{agree:function(){var i=confirm("确认同意该申请？");i&&$.ajax({url:$.apiUrl+"/apply/allow",type:"POST",data:JSON.stringify({applicationID:n.id})}).done(function(i){$.ylbAjaxHandler(i,function(){$.ylbAlert("操作成功"),n.reason=!1,a.getInfo()})})},disagree:function(){$.ajax({url:$.apiUrl+"/apply/reject",type:"POST",data:JSON.stringify({applicationID:n.id,reason:n.reasons})}).done(function(i){$.ylbAjaxHandler(i,function(){n.reason=!1,a.getInfo()})})},showreason:function(){n.reason=!n.reason}}})}};a.init()}();