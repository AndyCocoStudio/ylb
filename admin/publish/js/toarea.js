!function(){var t={cp:1,sz:20,t:0,pc:"",cc:"",ac:"",plist:[],clist:[],alist:[]},a={init:function(){a.getpList()},getpList:function(){$.when($.ajax({url:$.apiUrl+"/address",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){t.plist=e.data,a.getAreaList()})})},updatecity:function(a){$.ajax({url:$.apiUrl+"/address?code="+a,type:"GET"}).done(function(a){$.ylbAjaxHandler(a,function(){t.clist=a.data})})},updatearea:function(a){$.ajax({url:$.apiUrl+"/address?code="+a,type:"GET"}).done(function(a){$.ylbAjaxHandler(a,function(){t.alist=a.data})})},getAreaList:function(){$.when($.ajax({url:$.apiUrl+"/user/all?cp="+t.cp+"&sz="+t.sz+"&k=0&pc="+t.pc+"&cc="+t.cc+"&ac="+t.ac,type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){t.list=e.data.areaManagers,t.t=e.data.totalCount,a.buildVue()})})},buildVue:function(){t=new Vue({el:"#toarea-main",data:t,methods:{sends:function(t){var e=$(t.target),n=e.attr("data-id"),c=e.prev("input").val();return c&&"0"!=c?void $.ajax({url:$.apiUrl+"/areamanager/quota",type:"PuT",data:JSON.stringify({receiverID:n,quota:c})}).done(function(t){$.ylbAjaxHandler(t,function(){$.ylbAlert("赠送成功！"),a.getAreaList()})}):void $.ylbAlert("请填写赠送数额")},changeprov:function(e){var n=$(e.target).find("option:selected").val();t.pc=n,t.cc="",t.ac="",t.alist=[],a.updatecity(n)},changecity:function(e){var n=$(e.target).find("option:selected").val();t.cc=n,t.ac="",a.updatearea(n)},changearea:function(a){var e=$(a.target).find("option:selected").val();t.ac=e},prev:function(){t.cp<=1||(t.cp=+t.cp-1,a.getAreaList())},next:function(){t.cp>=Math.ceil(t.t/t.sz)||(t.cp=+t.cp+1,a.getAreaList())},jump:function(){t.cp>=Math.ceil(t.t/t.sz)&&(t.cp=Math.ceil(t.t/t.sz)),t.cp<=1&&(t.cp=1),a.getAreaList()},filterlist:function(){a.getAreaList()}}})}};a.init()}();