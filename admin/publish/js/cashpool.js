!function(){var e={st:"",et:"",t1:!0,t2:!1,t3:!1,t4:!1,goods:{},plat:{},service:{}},t={init:function(){t.getCashPool()},buildEcharts:function(){e.goods=echarts.init(document.getElementById("goods")),e.plat=echarts.init(document.getElementById("plat")),e.service=echarts.init(document.getElementById("service"));var t={title:{text:"货款资金池",subtext:"现金入账["+e.info.pool.PaymentForGoods.cash+"] 佣金入账["+e.info.pool.PaymentForGoods.commission+"] 货款入账["+e.info.pool.PaymentForGoods.paymentForGoods+"] 积分入账["+e.info.pool.PaymentForGoods.score+"]",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["现金","佣金","货款","积分"]},series:[{name:"资金比例",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:e.info.pool.PaymentForGoods.cash,name:"现金"},{value:e.info.pool.PaymentForGoods.commission,name:"佣金"},{value:e.info.pool.PaymentForGoods.paymentForGoods,name:"货款"},{value:e.info.pool.PaymentForGoods.score,name:"积分"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},o={title:{text:"平台费资金池",subtext:"现金入账["+e.info.pool.PlatFormFee.cash+"] 佣金入账["+e.info.pool.PlatFormFee.commission+"] 货款入账["+e.info.pool.PlatFormFee.paymentForGoods+"] 积分入账["+e.info.pool.PlatFormFee.score+"]",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["现金","佣金","货款","积分"]},series:[{name:"资金比例",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:e.info.pool.PlatFormFee.cash,name:"现金"},{value:e.info.pool.PlatFormFee.commission,name:"佣金"},{value:e.info.pool.PlatFormFee.paymentForGoods,name:"货款"},{value:e.info.pool.PlatFormFee.score,name:"积分"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},i={title:{text:"服务费资金池",subtext:"现金入账["+e.info.pool.ServiceFee.cash+"] 佣金入账["+e.info.pool.ServiceFee.commission+"] 货款入账["+e.info.pool.ServiceFee.paymentForGoods+"] 积分入账["+e.info.pool.ServiceFee.score+"]",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["现金","佣金","货款","积分"]},series:[{name:"资金比例",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:e.info.pool.ServiceFee.cash,name:"现金"},{value:e.info.pool.ServiceFee.commission,name:"佣金"},{value:e.info.pool.ServiceFee.paymentForGoods,name:"货款"},{value:e.info.pool.ServiceFee.score,name:"积分"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.goods.setOption(t),e.plat.setOption(o),e.service.setOption(i)},setDate:function(){new Pikaday({field:document.getElementById("fst"),firstDay:1,minDate:new Date("2016-07-01"),maxDate:new Date("3020-12-31"),yearRange:[2016,3020]}),new Pikaday({field:document.getElementById("fet"),firstDay:1,minDate:new Date("2016-07-01"),maxDate:new Date("3020-12-31"),yearRange:[2016,3020]})},getCashPool:function(){$.when($.ajax({url:$.apiUrl+"/statistics/pool",type:"GET"})).done(function(o){$.ylbAjaxHandler(o,function(){e.info=o.data,t.buildVue()})})},filterCash:function(){$.when($.ajax({url:$.apiUrl+"/statistics/pool?st="+e.st+"&et="+e.et,type:"GET"})).done(function(o){$.ylbAjaxHandler(o,function(){e.info=o.data,t.buildEcharts()})})},buildVue:function(){e=new Vue({el:"#cashpool-main",data:e,methods:{changetap:function(t){switch(t){case 1:this.t1=!0,this.t2=!1,this.t3=!1,this.t4=!1,setTimeout(function(){e.goods.resize()},200);break;case 2:this.t1=!1,this.t2=!0,this.t3=!1,this.t4=!1,setTimeout(function(){e.plat.resize()},200);break;case 3:this.t1=!1,this.t2=!1,this.t3=!0,this.t4=!1,setTimeout(function(){e.service.resize()},200);break;case 4:this.t1=!1,this.t2=!1,this.t3=!1,this.t4=!0;break;default:this.t1=!0,this.t2=!1,this.t3=!1,this.t4=!1,e.goods.resize()}},filtercash:function(){t.filterCash()}}}),setTimeout(function(){t.buildEcharts(),t.setDate()},200)}};t.init()}();