!function(){var t={filter:{m:"",en:"",st:"",et:""},cp:1,sz:25,t:0,oid:"",note:"",gnote:!1,cover:!1},e={init:function(){e.getList()},getList:function(){$.when($.ajax({url:$.apiUrl+"/order/refund?k=0&cp=1&sz="+t.sz,type:"GET"})).done(function(n){console.log(n),$.ylbAjaxHandler(n,function(){t.list=n.data,e.buildVue()})})},filterList:function(){$.when($.ajax({url:$.apiUrl+"/order/refund?k=0&m="+t.filter.m+"&et="+t.filter.et+"&st="+t.filter.st+"&en="+t.filter.en+"&cp="+t.cp+"&sz="+t.sz,type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){t.list=e.data})})},buildVue:function(){t=new Vue({el:"#refund-main",data:t,methods:{filterlist:function(){e.filterList()},shownote:function(e,n){t.oid=e,t.note=n,t.gnote=!0,t.cover=!0},addnote:function(){$.ajax({url:$.apiUrl+"/order/refund/note",type:"POST",data:JSON.stringify({refundOrderID:t.oid,note:t.note})}).done(function(t){$.ylbAjaxHandler(t,function(){$.ylbAlert("添加成功！"),e.filterList()})})},hideall:function(){t.cover=!1,t.gnote=!1},agree:function(t){var n=confirm("确认同意该笔退款？");n&&$.ajax({url:$.apiUrl+"/order/refund/agree",type:"POST",data:JSON.stringify({refundOrderID:t})}).done(function(t){$.ylbAjaxHandler(t,function(){$.ylbAlert("操作成功！"),e.filterList()})})},disagree:function(t){var n=confirm("确认拒绝该笔退款？");n&&$.ajax({url:$.apiUrl+"/order/refund/reject",type:"POST",data:JSON.stringify({refundOrderID:t})}).done(function(t){$.ylbAjaxHandler(t,function(){$.ylbAlert("操作成功！"),e.filterList()})})},prev:function(){t.cp<=1||(t.cp=+t.cp-1,e.filterList())},next:function(){t.cp>=Math.ceil(t.t/t.sz)||(t.cp=+t.cp+1,e.filterList())},jump:function(){t.cp>=Math.ceil(t.t/t.sz)&&(t.cp=Math.ceil(t.t/t.sz)),t.cp<=1&&(t.cp=1),e.filterList()}}}),setTimeout(function(){$.setLeftBar("refund")},100)}};e.init()}();