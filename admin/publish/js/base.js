!function(e){"use strict";e.apiUrl="/api",e.ajaxSetup({contentType:"application/json; charset=utf-8",beforeSend:function(l){l.setRequestHeader("osid",e.getID())}}),e.checkSession=function(){var l=e.getID(),r=window.location.href;l||(window.location.href="login.html?url="+r)},e.ylbError=function(l){if("1001"===l){e.clearID();var r=window.location.href;window.location.href="login.html?url="+r}else if(2001===l)e.ylbAlert("服务器开小差了,请稍后重试...");else switch(l){case"4001":e.ylbAlert("验证码错误");break;case"4002":e.ylbAlert("验证码过期");break;case"4003":e.ylbAlert("抵扣的积分超过允许上限");break;case"4004":e.ylbAlert("没有足够的积分用来抵扣");break;case"4005":e.ylbAlert("该用户尚未注册");break;case"4006":e.ylbAlert("查询不到商品");break;case"4007":e.ylbAlert("已支付的订单不能取消");break;case"4008":e.ylbAlert("暂无可领取积分");break;case"4009":e.ylbAlert("领取积分失败");break;case"4010":e.ylbAlert("积分点为0");break;case"4011":e.ylbAlert("余额转出申请已处理");break;case"4012":e.ylbAlert("账户金额不足");break;case"4013":e.ylbAlert("不能重复申请");break;case"4014":e.ylbAlert("该手机已经注册");break;case"4015":e.ylbAlert("原密码输入错误");break;case"4016":e.ylbAlert("推荐会员人数不足");break;case"4017":e.ylbAlert("本时间段不可领取积分");break;case"4018":e.ylbAlert("违规操作");break;case"4019":e.ylbAlert("申请已经处理");break;case"4020":e.ylbAlert("该区域已有区域经理");break;case"4021":e.ylbAlert("该账号非加盟商");break;case"4022":e.ylbAlert("该账号已经是区域经理/客户经理");break;default:e.ylbAlert("服务器又开小差")}},e.ylbAjaxHandler=function(l,r,a){l.result?r():(e.ylbError(l.error),a&&a())},e.ylbAlert=function(l,r){var a=(e(window).width()-240)/2;r=r||1500;var t=['<div class="ylb-alert">',l,"</div>"],o=e(t.join("")).css("left",a).appendTo("body");o.show(),setTimeout(function(){o.remove()},r)},e.urlParam=function(e,l){l||(l=window.location.href);try{var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(l);return r?r[1]||"":""}catch(a){return""}},e.regexUrl=function(e){e||(e=window.location.href);var l=new Array;return l=e.split("?url="),l[1]?l[1]:(l=e.split("&url="),l[1])},e.localStorageHandler=function(e,l,r){switch(e){case"set":localStorage.setItem(l,r);break;case"get":return localStorage.getItem(l);case"clear":localStorage.removeItem(l);break;case"clearall":localStorage.clear()}},e.setID=function(e){localStorage.setItem("osid",e)},e.getID=function(){return localStorage.getItem("osid")},e.clearID=function(){localStorage.removeItem("osid")},e.parseHandler=function(l,r){switch(l){case"js":return JSON.stringify(r);case"sj":return e.parseJSON(r)}},e.ylbAddCart=function(l,r){var a=e.localStorageHandler("get",l);if(a){for(var t=e.parseHandler("sj",a),o=!1,n=0,c=t.length;n<c;n++)if(t[n].goodsID==r.goodsID){o=!0;break}o?e.ylbAlert("商品已添加购物车"):(r="["+a.substring(1,a.length-1)+","+e.parseHandler("js",r)+"]",e.localStorageHandler("set",l,r),e.ylbAlert("添加成功"))}else e.localStorageHandler("set",l,"["+e.parseHandler("js",r)+"]"),e.ylbAlert("添加成功")},e.ylbRemoveCart=function(l,r){for(var a=e.localStorageHandler("get",l),t=e.parseHandler("sj",a),o="",n=0,c=t.length;n<c;n++)t[n].goodsID!=r&&(o+=e.parseHandler("js",t[n])+",");o="["+o.substring(0,o.length-1)+"]",e.localStorageHandler("set",l,o)},e.checkFlag=function(){e.getID()&&"false"==e.localStorageHandler("get","flag")&&(e.ylbAlert("为了您的账号安全，请设置支付密码"),setTimeout(function(){window.location.href="edit.html?url="+window.location.href},1500))},e.checkIsMobileNumber=function(e){var l=/^1\d{10}$/;return l.test(e)},e.ylbConfirm=function(l){var r={type:"confirm",msg:"",callback:function(){},navCallback:function(){}};e.extend(r,l);var a='<div class="ylb-confirm-cover"></div>',t="";t+="confirm"===r.type?'<input type="button" class="btn-cancel" value="取消"><input type="button" class="btn-yes" value="确认">':'<input type="button" class="btn-yes" value="确认">',a+='<div class="ylb-confirm"><h4 class="confirm-tit">提示</h4><p class="confirm-msg">'+r.msg+'</p><div class="confirm-group">'+t+"</div></div>",e("body").append(a),e(".ylb-confirm-cover").show();var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;e(".ylb-confirm").css("margin-top",+o-40+"px"),e("body").delegate(".btn-cancel","click",function(){e(".ylb-confirm-cover").remove(),e(".ylb-confirm").remove(),e("body").undelegate(),r.navCallback()}),e("body").delegate(".btn-yes","click",function(){r.callback(),e(".ylb-confirm-cover").remove(),e(".ylb-confirm").remove(),e("body").undelegate()})}}(jQuery),function(){$(".logout").on("click",function(){e.islogin?($.clearID(),$.localStorageHandler("clear","flag"),window.location.href="login.html"):window.location.href="login.html"}),$(".ylb-search").on("click",function(){$(".ylb-cover").fadeIn(),$(".ylb-search-wrap").fadeIn()}),$(".ylb-menu").on("click",function(){$(".ylb-cover").fadeIn(),$(".ylb-menu-wrap").fadeIn()}),$(".ylb-cover, .ylb-menu-wrap").on("click",function(){$(".ylb-cover").fadeOut(),$(".ylb-search-wrap").fadeOut(),$(".ylb-menu-wrap").fadeOut()});var e={islogin:$.getID||!1},l={init:function(){l.buildVue()},buildVue:function(){e=new Vue({el:"#layout-main",data:e,methods:{logout:function(){$.clearID(),window.location.href="login.html"}}})}};l.init()}();