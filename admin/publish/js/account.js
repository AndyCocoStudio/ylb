!function(){var a={edita:!1,cover:!1,newa:!1,na:{name:"",password:"",role:""},ea:{}},n={init:function(){n.getRoleList()},getRoleList:function(){$.when($.ajax({url:$.apiUrl+"/staff",type:"GET"})).done(function(e){$.ylbAjaxHandler(e,function(){a.list=e.data.staff,n.buildVue()})})},buildVue:function(){a=new Vue({el:"#account-main",data:a,methods:{editaccount:function(n){a.edita=!0,a.cover=!0,a.ea=a.list[n]},hideall:function(){a.edita=!1,a.cover=!1,a.newa=!1},newaccount:function(){a.newa=!0,a.cover=!0},nselrole:function(n){var e=$(n.target).find("option:selected").val();a.na.role=e},eselrole:function(n){var e=$(n.target).find("option:selected").val();a.ea.role=e},createaccount:function(){$.ajax({url:$.apiUrl+"/staff",type:"PUT",data:JSON.stringify(a.na)}).done(function(e){$.ylbAjaxHandler(e,function(){$.ylbAlert("添加成功！"),a.hideall(),a.na={name:"",password:"",role:""},n.getRoleList()})})},updateaccount:function(){$.ajax({url:$.apiUrl+"/staff/password",type:"POST",data:JSON.stringify({staffID:a.ea.staffID,password:a.ea.password})}).done(function(e){$.ylbAjaxHandler(e,function(){$.ylbAlert("修改成功！"),a.hideall(),n.getRoleList()})})},delaccount:function(e){var t=confirm("是否要删除该用户？");t&&$.ajax({url:$.apiUrl+"/staff?id="+e,type:"DELETE"}).done(function(e){$.ylbAjaxHandler(e,function(){$.ylbAlert("删除成功！"),a.hideall(),n.getRoleList()})})}}})}};n.init()}();